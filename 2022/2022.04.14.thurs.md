# π§ μ¤λ¥λ¥Ό ν…μ¤νΈ ν•λ” λ°©λ²• 
21.04.14.thur

mood: π† π΄

<! κ³µλ¶€ν•λ©° μ‘μ„±ν• λ‚΄μ©μ΄λ©° ν‹€λ¦° λ‚΄μ©μ΄ μμ„ μ μμµλ‹λ‹¤. >

## μ¤λ ν• κ²ƒ
- STEP2 μ¤ν† λ μ΄μ•„μ›ƒ μμ§ μ΅κΈ°
- reusable sell ν•™μµ ν™λ™

## λ¬Έμ μ  / κ³ λ―Όν•μ 

---

## ν•™μµ λ‚΄μ©
### π§ μ¤λ¥λ¥Ό ν…μ¤νΈ ν•λ” λ°©λ²• 

μ¤λ¥λ¥Ό λμ§€λ” λ¶€λ¶„μ„ ν…μ¤νΈλ¥Ό ν†µκ³Όν•λ„λ΅ μ‘μ„±ν•λ ¤λ©΄ μ–΄λ–»κ² ν•΄μ•Όν• κΉ?

#### XCTAssertThrowsError() λ¥Ό μ΄μ©ν•λ” λ°©λ²• 
μ–΄λ–»κ² μ‚¬μ©ν•λ” λ©”μ„λ“μΈμ§€ κµ¬ν„ λ¶€λ¥Ό λ³΄μ. 
```swift
func XCTAssertThrowsError<T>(_ expression: @autoclosure () throws -> T, _ message: @autoclosure () -> String = "", file: StaticString = #filePath, line: UInt = #line, _ errorHandler: (_ error: Error) -> Void = { _ in })
```
μ²«λ²μ§Έ νλΌλ―Έν„°λ΅ (`@autoclosure`λ” ν΄λ΅μ €κ°€ μ•„λ‹ μ‹μ„ μλ™μΌλ΅ ν΄λ΅μ €λ΅ λ§λ“¤μ–΄ μ¤€λ‹¤.) ν‘ν„μ‹μ„ λ°›λ”λ‹¤. 

λ‘λ²μ§Έ νλΌλ―Έν„°λ¥Ό λ©”μ„Έμ§€λ¥Ό λ°›λ”λ‹¤. κ·Έλ°λ° κΈ°λ³Έκ°’μ΄ κ³µλ°±μΌλ΅ λ“¤μ–΄κ°€ μλ‹¤.

μ„Έλ²μ§Έ νλΌλ―Έν„°λ” StaticString μ΄λΌλ” νƒ€μ…μ fileμ„ κ°€μ§„λ‹¤. μ΄κ²ƒλ„ `#filePath`κ°€ κΈ°λ³Έκ°’μΌλ΅ μ„¤μ •λμ–΄ μλ‹¤. 

λ„¤λ²μ§Έ νλΌλ―Έν„°λ” λΌμΈμΌλ΅ UInt νƒ€μ…μΈλ° κΈ°λ³Έκ°’μ΄ #line μΌλ΅ λμ–΄ μλ‹¤. 

κ·Έλ¦¬κ³  λ§μ§€λ§‰ λ‹¤μ„―λ²μ§Έ νλΌλ―Έν„°λ΅ errorHandler λ¥Ό λ°›λ”λ‹¤. 

λ­κ°€ λ§μ€λ°... μ°μ„  λ‹¤λ¥Έκ±΄ μ λ¨λ¥΄κ³  1λ² 5λ² νλΌλ―Έν„°λ¥Ό μ λ„£μΌλ©΄ λλ‹¤.
```swift
func testμ½”λ“() throws {
    XCTAssertThrowsError(try μ¤λ¥λ¥Όλμ§μμλ”λ©”μ„λ“(λ¬Έμ μλ”κ°’)) { error in
        XCTAssertEqual(error as? MyError, MyError.assetLoadError)
    }
}
```
μ²«λ²μ§Έ νλΌλ―Έν„°μ μ¤λ¥λ¥Ό λμ§€λ” κµ¬λ¬Έμ„ μ μ–΄μ£Όκ³ , λ§μ§€λ§‰ ν΄λ΅μ €μ—μ„ error λ¥Ό λ°›μ•„μ™€μ„ μ•μ—μ„ XCTAssertEqual λ΅ μ΄ μ¤λ¥κ°€ λ§λ”μ§€ λΉ„κµν•κΈ°. 

#### XCTFail() μ„ μ΄μ©ν•λ” λ°©λ²• 

XCTFail() -> ν•­μƒ μ‹¤ν¨ν•λ” ν…μ¤νΈ

```swift
func testμ½”λ“ throws {
    do {
        try μ¤λ¥λ¥Όλμ§μμλ”λ©”μ„λ“(λ¬Έμ μλ”κ°’)
            XCTFail()
        } catch MyError.errorType(let key, let value) {
            print(print("\n key: \(key) \n value: \(value) \n"))
        } catch {
            XCTFail()
        }
    }
```
do catch λ¬Έμ„ μ΄μ©ν•΄μ„ 
μλ»λκ² μ‹¤ν¨ν•΄μ•Όν•λ”λ° μ„±κ³µν•λ” κ²½μ° XCTFail() λ΅ μ‹¤ν¨ν•κ² ν•  μ μκ³  
λ‹¤λ¥Έ μ—λ¬νƒ€μ…μ„ λ°·μ—μ„ κ²½μ°μ—λ„ μ‹¤ν¨ν•κ² ν…μ¤νΈ μ½”λ“λ¥Ό μ§¤ μ μλ‹¤.

---
μ°Έκ³  μλ£ 
[XCTAssertThrowsError κ³µμ‹ λ¬Έμ„](https://developer.apple.com/documentation/xctest/1500795-xctassertthrowserror)
[XCTFail κ³µμ‹ λ¬Έμ„](https://developer.apple.com/documentation/xctest/xctfail)

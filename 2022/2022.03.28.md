# ARC
21.03.28

mood: 😖

<! 공부하며 작성한 내용이며 틀린 내용이 있을 수 있습니다. >

## 오늘 한 것
- ARC 세션 듣기
- 계산기 프로젝트 2 STEP1 진행

## 문제점 / 고민한점
- 사용자 지정 타입에 이쿠터블을 채택해도 왜 옵셔널값은 비교할 수 없을까?

---

## 학습 내용
### ARC
#### ARC란? 
swift 의 참조 타입은 어디서 값이 참조하고 있는지 Referance Count 라는 것으로 관리한다.
전에는 직접 이 레퍼런스 카운트를 추가해고 해지 해주어야 했지만 ARC 가 생긴 이후에 할당과 해지를 자동으로 해주게 되었다. 
즉, Auto Referance Count 란 자동으로 RC 를 관리해 주는 시스템이다. 
(그렇다고 완전 자동인 것은 아니다. 관리를 해주어야 한다.)

#### Strong Referance Count
강한 참조라고 이야기하며, 아무 것도 설정하지 않으면 Strong이 기본 값이다. 
메모리에 강한 참조가 일어나고 있는 동안에는 메모리가 해지되지 않는다. 

#### Weak Referance Count
약한 참조라고 이야기 하며, 선언 시에 weak 키워드를 붙여주면 RC 가 약한참조로 설정 된다. 
약한 참조는 강한 참조와 다르게 약한 참조가 있어도, 메모리가 해지 될 수 있다. 
메모리가 해지되면 약한 참조에는 자동으로 nil 을 할당해 준다.
그렇기 때문에 항상 var 이여야 한다. 

#### Unowned Referance Count
미소유 참조는 약한 참조와 비슷하지만 다르다. 약한 참조 처럼 미소유 참조가 있어도 메모리가 해제 될 수 있다. 그런데 약한 참조 처럼 nil 이 할당되지 않고 계속 참조를 하고 있다. (var 를 사용하지 않아도 됨) 
그래서 만약에 해지된 메모리에 접근 하면 에러가 난다. (특정한 경우에만 조심해서 사용해야 함.)

#### 순환 참조
서로가 서로를 강한 참조로 참조하고 있으면 메모리 해제가 되지 않는 일이 발생 한다.
그래서 한쪽을 약한참조 또는 미소유 참조로 해주는 것이 좋다.

#### Weak vs Unowned 
언제 약한 참조를 사용하고 언제 미소유 참조를 사용해야 할까?


---

참고자료 
[ARC 공식 문서](https://docs.swift.org/swift-book/LanguageGuide/AutomaticReferenceCounting.html)


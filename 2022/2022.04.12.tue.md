# self Self .self .Type .Protocol
21.04.12.tue

mood: ğŸ˜† ğŸ˜´

<! ê³µë¶€í•˜ë©° ì‘ì„±í•œ ë‚´ìš©ì´ë©° í‹€ë¦° ë‚´ìš©ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. >

## ì˜¤ëŠ˜ í•œ ê²ƒ
- STEP1 PR
- Meta Type ê³µë¶€

## ë¬¸ì œì  / ê³ ë¯¼í•œì 
- Decodable ì„ Item ê°ì²´ì—ë§Œ ì±„íƒí–ˆëŠ”ë°, [Item] ë„ ì–´ë–»ê²Œ Decodable ë¡œ ì¸ì‹ ë  ìˆ˜ ìˆì„ê¹Œ?

---

## í•™ìŠµ ë‚´ìš©
### ğŸ– ê°„ë‹¨ ì •ë¦¬ 
* .Type -> Meta Type
* .Protocol -> protocol ì˜ Meta Type 
* .self -> Type ì— ë¶™ì—¬ Meta Type ìƒì„±
* self -> ìê¸°ìì‹  ì¸ìŠ¤í„´ìŠ¤ 
* Self -> ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ€ì…

### ğŸ– Meta Type

ë©”íƒ€íƒ€ì… íƒ€ì… (metatype type) ì€ í´ë˜ìŠ¤ íƒ€ì…, êµ¬ì¡°ì²´ íƒ€ì…, ì—´ê±°í˜• íƒ€ì…, ê·¸ë¦¬ê³  í”„ë¡œí† ì½œ íƒ€ì…ì„ í¬í•¨í•˜ì—¬ ëª¨ë“  íƒ€ì…ì˜ íƒ€ì…ì„ ë‚˜íƒ€ë‚¸ë‹¤. 

ëª¨ë“  íƒ€ì…ì„ ë‚˜íƒ€ë‚¸ ë‹¤ëŠ” ê²ƒì´ ë¬´ìŠ¨ ë§ì¼ê¹Œìš”?

```swift
struct Cat {
    static let tribe = "ê³ ì–‘ì´"
    let name: String
}

let nabi = Cat(name: "ë‚˜ë¹„")
nabi.name

let cat = Cat.self
cat.tribe

let catType = type(of: nabi)
```
ìœ„ì˜ ì½”ë“œë¥¼ ë³´ë©´ `Cat` ì´ë¼ëŠ” êµ¬ì¡°ì²´ê°€ ìˆê³  `nabi` ë¼ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í–ˆë‹¤.
`nabi`ì˜ íƒ€ì…ì„ ë³´ë©´ `Cat` ì´ë‹¤. ê·¸ë ‡ê¸°ì— `nabi.name` ìœ¼ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. 

ê·¸ë ‡ë‹¤ë©´ tribe ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œ íƒ€ì… ìì²´ë¥¼ `cat` ìƒìˆ˜ ì•ˆì— ì €ì¥í•˜ê³  ì‹¶ë‹¤.
ê·¸ëŸ¼ `Cat.self` ë¥¼ ì‚¬ìš©í•˜ë©´ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. 
ì§€ê¸ˆ `cat` ì˜ íƒ€ì…ì€ `Cat.Type` ì´ë‹¤. íƒ€ì…ì˜ íƒ€ì…ì¸ ê²ƒì´ë‹¤.

ì¼ë°˜ì ìœ¼ë¡œ íƒ€ì…ì„ ì–»ì„ ë•Œ ì“°ëŠ” type(of: ) ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ ë³´ì•„ë„ `Cat.Type` ì´ë¼ëŠ” ê²°ê³¼ë‚˜ ë‚˜íƒ€ë‚œë‹¤. 

ì—¬ê¸°ì„œ Cat.Type ì€ ë©”íƒ€íƒ€ì…ì´ë‹¤. 
ê·¸ëŸ¬ë‹ˆê¹Œ .Type ìœ¼ë¡œ ëë‚˜ëŠ” íƒ€ì…ì€ ë©”íƒ€ íƒ€ì…ì´ë‹¤.

.self ë¥¼ ë¶™ì´ë©´ MetaTypeì„ ì–»ì„ ìˆ˜ ìˆë‹¤. 

> .Type ì€ íƒ€ì…ì´ê¸° ë•Œë¬¸ì—
> ì œë„¤ë¦­ì—ì„œ ì‚¬ìš©í•  ê²½ìš°ì— <T.Type> ì´ëŸ°ì‹ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.

ğŸ“Œ
**.Type ìœ¼ë¡œ ëë‚˜ëŠ” íƒ€ì…ì€ ë©”íƒ€íƒ€ì…(ì¦‰ íƒ€ì…ì˜ íƒ€ì…ì´ë‹¤.)
íƒ€ì…ì— .self ë¥¼ ë¶™ì´ë©´ ë©”íƒ€íƒ€ì…ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.**

### ğŸ– Protocolì˜ Meta Type

```swift
protocol Eatable {
    
}

let eatType = Eatable.self
//eatTypeì˜ íƒ€ì…ì€ Eatable.Protocol
```
`Eatable` í”„ë¡œí† ì½œì˜ ë©”íƒ€íƒ€ì…ì„ ì–»ê¸°ìœ„í•´ì„œ `Eatable.self` ë¥¼ í•˜ê³  `eatType` ì„ ì°ì–´ë³´ì•˜ë”ë‹ˆ 
`Eatable.Type` ì´ ì•„ë‹ˆê³  `Eatable.Protocol` ì´ë‹¤. 

í”„ë¡œí† ì½œì˜ ë©”íƒ€íƒ€ì…ì€ `.Protocol` í”„ë¡œí† ì½œë¡œ ë‚˜íƒ€ë‚¸ë‹¤. 

```swift
struct Cat: Eatable { }

let nabi: Eatable.Type = Cat.self
```
ì´ë ‡ê²Œ êµ¬ì¡°ì²´ì— í”„ë¡œí† ì½œì„ ì±„íƒí•´ì£¼ê³  íƒ€ì…ì„ ë³´ì•˜ì„ ë•ŒëŠ” `Eatable.Type` ìœ¼ë¡œ í•´ë„ ë¬¸ì œê°€ ì—†ëŠ”ë° `Eatable` ì„ í”„ë¡œí† ì½œì´ ì•„ë‹Œ íƒ€ì…ìœ¼ë¡œ ì¸ì§€í–ˆê¸° ë•Œë¬¸ì´ë‹¤. 

### ğŸ– .self self
Self ë¥¼ ë³´ì „ì— .self self ì— ëŒ€í•´ì„œ ë¨¼ì € ì²´í¬í•˜ê³  ë„˜ì–´ê°€ì. 

.self -> ë©”íƒ€íƒ€ì…ì„ ë§Œë“¤ ë•Œ ì”€
self -> ì¸ìŠ¤í„´ìŠ¤ ì•ˆì—ì„œ ìƒì„± ì¸ìŠ¤í„´ìŠ¤ ìì²´ë¥¼ ë‚˜íƒ€ëƒ„.

```swift
struct Cat {
    let name: String
    func sayHello() {
        print("ì•ˆë…•ë‚˜ëŠ” \(self.name) ì´ì•¼")
    }
}
```
ì—¬íƒœê» ê³„ì† ì‚¬ìš© í•˜ë˜ self ê°€ ì´ self ğŸ˜„

### ğŸ– Self Type
ê³µì‹ë¬¸ì„œì— ë³´ë©´
> Self ë¡œ í˜„ì¬ íƒ€ì…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ë¼ê³  ë˜ì–´ìˆëŠ”ë° ì½”ë“œë¥¼ ë´ ë³´ì. 
```swift
struct Cat {
    static let tribe = "ê³ ì–‘ì´"
    let name: String
    
    func sayself() {
        print("\(self)")
    }
    
    func saySelf() {
        print("\(Self.tribe)")
    }
}

let nabi = Cat(name: "ë‚˜ë¹„")

nabi.sayself()
nabi.saySelf()

//Cat(name: "ë‚˜ë¹„")
//ê³ ì–‘ì´
```
Cat êµ¬ì¡°ì²´ë¥¼ ì‚¬ìš©í•´ nabi ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê³  ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ ë³´ì•˜ë‹¤. 
ì²˜ìŒ ì†Œë¬¸ì ì…€í”„ë¥¼ í”„ë¦°íŠ¸ í•´ë³´ë‹ˆ ì¸ìŠ¤í„´ìŠ¤ ìì²´ê°€ í”„ë¦°íŠ¸ ë˜ì—ˆë‹¤. 
ë‘ë²ˆì§¸ ëŒ€ë¬¸ì ì…€í”„ë¥¼ ì´ìš©í•˜ë‹ˆ íƒ€ì… í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. 

**Self ë¼ëŠ” ê²ƒì´ ê·¸ íƒ€ì… ìì²´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê²ƒì´ë‹¤.**

ê·¸ëƒ¥ Self ë¥¼ ë¶ˆëŸ¬ ì˜¬ ìˆ˜ ì—†ì—ˆë˜ ê²ƒì€ Self.self ë¥¼ ì´ìš©í•´ì•¼ íƒ€ì…ìœ¼ë¡œ print ë  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.
 

í´ë˜ìŠ¤ ì„ ì–¸ì˜ ë©¤ë²„ì—ì„œ Self ëŠ” ë‹¤ìŒì„ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤:
* ë©”ì„œë“œì˜ ë°˜í™˜ íƒ€ì…
* ì½ê¸°ì „ìš© ì„œë¸Œ ìŠ¤í¬ë¦½íŠ¸ì˜ ë°˜í™˜ íƒ€ì…
* ì½ê¸°ì „ìš© ê³„ì‚°ëœ í”„ë¡œí¼í‹°ì˜ íƒ€ì…
* ë©”ì„œë“œì˜ ë°”ë””

ê³µì‹ ë¬¸ì„œì˜ ë‚˜ì˜¨ ì˜ˆì œë¥¼ ë³´ì. 
x y ëŠ” ë‹¹ì—°íˆ ê°’ì´ ê·¸ë ‡ê²Œ ë‚˜ì˜¨ë‹¤. 
```swift
class Superclass {
    func f() -> Self { return self }
}

let x = Superclass()
print(type(of: x.f()))
// Prints "Superclass"

class Subclass: Superclass { }
let y = Subclass()
print(type(of: y.f()))
// Prints "Subclass"

let z: Superclass = Subclass()
print(type(of: z.f()))
// Prints "Subclass"
```
ê·¸ëŸ°ë° z ëŠ” `Superclass` ë¡œ ì—…ìºìŠ¤íŒ… í•´ì£¼ì—ˆëŠ”ë°ë„ `Self` ê°€ `Subclass` ê°€ ë‚˜ì˜¨ë‹¤.
ì´ìœ ëŠ” Self ê°€ ì»´íŒŒì¼ íƒ€ì„ì—ì„œ(ìš°ë¦¬ê°€ ì •í•´ì¤€) ì°¸ì¡°í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ëŸ°íƒ€ì„ì—ì„œ íƒ€ì…ì„ ì°¸ì¡°í•˜ê¸° ë•Œë¬¸ì—  `Subclass` ê°€ ë‚˜ì™”ë‹¤ê³  í•œë‹¤. 

---
ì°¸ê³  ìë£Œ 
[Type ì— ê´€í•œ ê³µì‹ ë­ê·€ì§€ ê°€ì´ë“œ](https://docs.swift.org/swift-book/ReferenceManual/Types.html)
